// const { songs } = require("./db");

const songs = [
    {
    title: 'Stitches',
    artist: 'Shawn Mendes',
    url: 'https://tabs.ultimate-guitar.com/tab/shawn-mendes/stitches-chords-1721601',
    capo: '1st fret',
    chords: [ 'Am', 'G', 'C', 'F' ]
  },
  {
    "_id": "62612b08834f661a62611af8",
    "title": "Little Talks",
    "artist": "Of Monsters and Men",
    "url": "https://tabs.ultimate-guitar.com/tab/of-monsters-and-men/little-talks-chords-1046763",
    "capo": "1st fret",
    chords: [
        "Am",
        "Fmaj7",
        "C",
        "G",
        "F"
    ]
  },
  {
    title: 'All Of Me',
    artist: 'John Legend',
    url: 'https://tabs.ultimate-guitar.com/tab/john-legend/all-of-me-chords-1248578',
    capo: '1st fret',
    chords: [
      'Em',     'C',
      'G',      'D',
      'Cmaj7',  'Cadd9',
      'Amadd9', 'Am',
      'Emadd9', 'Am/C',
      'C/D',    'Dadd9'
    ]
  },
    {
      "title": "Harusnya Aku",
      "artist": "Armada",
      "url": "https://tabs.ultimate-guitar.com/tab/armada/harusnya-aku-chords-1733940",
      "capo": "none",
      "chords": [
        "C",
        "F",
        "Dm",
        "G",
        "Em",
        "Am"
      ]
    },
    {
      "title": "Use Somebody",
      "artist": "Kings of Leon",
      "url": "https://tabs.ultimate-guitar.com/tab/kings-of-leon/use-somebody-chords-799959",
      "capo": "none",
      "chords": [
        "C",
        "C/E",
        "F",
        "Am",
        "D",
        "F#"
      ]
    },
    {
      "title": "Titanium",
      "artist": "David Guetta feat. Sia",
      "url": "https://tabs.ultimate-guitar.com/tab/david-guetta/titanium-chords-1098920",
      "capo": "3rd fret",
      "chords": [
        "C",
        "G",
        "Am",
        "F",
        "Em",
        "Asus2"
      ]
    },
    {
      "title": "Drops Of Jupiter",
      "artist": "Train",
      "url": "https://tabs.ultimate-guitar.com/tab/train/drops-of-jupiter-chords-1433",
      "capo": "none",
      "chords": [
        "C",
        "G",
        "F",
        "D",
        "Dm",
        "Bb"
      ]
    },
    {
      "title": "Stand By Me",
      "artist": "Ben E. King",
      "url": "https://tabs.ultimate-guitar.com/tab/ben-e-king/stand-by-me-chords-73005",
      "capo": "none",
      "chords": [
        "A",
        "F#m",
        "D",
        "E"
      ]
    },
    {
      "title": "Demons",
      "artist": "Imagine Dragons",
      "url": "https://tabs.ultimate-guitar.com/tab/imagine-dragons/demons-chords-1148110",
      "capo": "1st fret",
      "chords": [
        "D",
        "A",
        "Bm",
        "G"
      ]
    },
    {
      "title": "Let It Be",
      "artist": "The Beatles",
      "url": "https://tabs.ultimate-guitar.com/tab/the-beatles/let-it-be-chords-60690",
      "capo": "none",
      "chords": [
        "C",
        "G",
        "Am",
        "Am7",
        "Fmaj7",
        "F6",
        "F",
        "E",
        "D"
      ]
    },
    {
      "title": "Sweet Child O Mine",
      "artist": "Guns N' Roses",
      "url": "https://tabs.ultimate-guitar.com/tab/guns-n-roses/sweet-child-o-mine-chords-176076",
      "capo": "none",
      "chords": [
        "D",
        "C",
        "G",
        "A",
        "Em",
        "B7",
        "Am",
        "E"
      ]
    },
    {
      "title": "Karma Police",
      "artist": "Radiohead",
      "url": "https://tabs.ultimate-guitar.com/tab/radiohead/karma-police-chords-103398",
      "capo": "m",
      "chords": [
        "Am",
        "D/F#",
        "Em",
        "G",
        "F",
        "D",
        "C",
        "Em/B",
        "Bm",
        "F#7",
        "E7"
      ]
    },
    {
      "title": "21 Guns",
      "artist": "Green Day",
      "url": "https://tabs.ultimate-guitar.com/tab/green-day/21-guns-chords-823449",
      "capo": "m",
      "chords": [
        "A",
        "Bb",
        "C",
        "Dm",
        "F",
        "Bb5",
        "C5",
        "C/E",
        "D5",
        "F5",
        "A5"
      ]
    },
    {
      "title": "Father And Son",
      "artist": "Cat Stevens",
      "url": "https://tabs.ultimate-guitar.com/tab/cat-stevens/father-and-son-chords-84491",
      "capo": "none",
      "chords": [
        "G",
        "D/F#",
        "C",
        "Am7",
        "Em",
        "Am",
        "D",
        "C/G",
        "Bm",
        "G/D"
      ]
    },
    {
      "title": "Halo",
      "artist": "BeyoncÃ©",
      "url": "https://tabs.ultimate-guitar.com/tab/759809",
      "capo": "2nd fret",
      "chords": [
        "G",
        "Am",
        "Em",
        "C"
      ]
    },
    {
      "title": "Redemption Song",
      "artist": "Bob Marley",
      "url": "https://tabs.ultimate-guitar.com/tab/bob-marley/redemption-song-chords-417640",
      "capo": "none",
      "chords": [
        "G",
        "Em",
        "Em7",
        "C",
        "G/B",
        "Am",
        "Am7",
        "D",
        "C/B",
        "Am6"
      ]
    },
    {
      "title": "Your Song",
      "artist": "Elton John",
      "url": "https://tabs.ultimate-guitar.com/tab/elton-john/your-song-chords-29113",
      "capo": "1st fret",
      "chords": [
        "D",
        "G",
        "A",
        "F#m",
        "Bm",
        "Em7",
        "Bm/A",
        "Bm/G#",
        "A/C#",
        "Gmaj7",
        "F#",
        "Em",
        "G6"
      ]
    },
    {
      "title": "Shape Of You",
      "artist": "Ed Sheeran",
      "url": "https://tabs.ultimate-guitar.com/tab/ed-sheeran/shape-of-you-chords-1928439",
      "capo": "2nd fret",
      "chords": [
        "Bm",
        "Em",
        "G",
        "A"
      ]
    }
]
const user={
    "_id": "626040d11ab47a40bbac456b",
    "name": "Bolito",
    "chordsKnow": [
        "B",
        "G",
        "C",
        "D",
        "Am",
        "F",
        "E7"
    ],
    "chordsNext": [],
    "songsMastered": []
}

// let arrayTrueFalse=[];
// const createArrayTrueFalse = (user) => {
//     arrayTrueFalse = [];
//     song.map(el=> {
//         console.log(el, 'el')
//         el["chords"]
//     .every(el=> arrayTrueFalse.push(user["chordsKnow"].includes(el)))
// })
//     console.log(arrayTrueFalse, 'rel songs')
//     return arrayTrueFalse;
// }

// createArrayTrueFalse(user)
// // // // let relevantSongs=[];
// // // // let arrayTrueFalse=[];
// // // // const createArrayTrueFalse = (user, numberFalses) => {
// // // //     relevantSongs=[];
// // // //     arrayTrueFalse = [];
// // // //     songs.map(el=> {
// // // //         console.log(el, 'el')
// // // //         el["chords"]
// // // //     .every(el=> arrayTrueFalse.push(user["chordsKnow"].includes(el)))
// // // //     console.log(relevantSongs, 'relevant songs before')
// // // //     console.log(arrayTrueFalse, 'rel songs')
// // // //     let arrayOfFalse = arrayTrueFalse.filter(chord=>chord===false)
// // // //     console.log(arrayOfFalse,'array of false')
// // // //     if(arrayOfFalse.length==numberFalses) relevantSongs.push(el)
// // // // })
// // // //     return relevantSongs;
// // // // }

// // // // console.log(createArrayTrueFalse(user, 1), 'FINISHED')

let relevantSongs=[];
let arrayTrueFalse = [];
let missingChord=[];

// // const booleanArrayCreator = (songChords, userChords, numberMissingChords) => {
// //     console.log(songChords)
// //     console.log(userChords)
// //     songChords.forEach((el)=>{
// //         console.log(el)
// //         if (!userChords.includes(el)) {
// //             arrayTrueFalse.push(el)
// //         }
// //         // arrayTrueFalse.push(userChords.includes(el))
// //     });
// //     if (arrayTrueFalse.length===numberMissingChords) return arrayTrueFalse
// //     // return missingChord;
// // }

// // console.log(booleanArrayCreator(songs[1].chords , user.chordsKnow, 1), 'boolean array')


const relevantSongFinder = (song, user, numberMissingChords) => {
    relevantSongs=[];

    missingChord=[];
    // console.log(song.chords, 'SONG CHORDS')
    // console.log(user.chordsKnow)
    song.chords.forEach((el)=>{
        // console.log(el)
        if (!user.chordsKnow.includes(el)) {
            missingChord.push(el)
        }
    });
    if (missingChord.length===numberMissingChords) { relevantSongs= [...relevantSongs, song]}
    return relevantSongs
}



// // const relevantArray=songs.map(el=>{
// //     relevantSongFinder(el, user, 1)
// // })
// // console.log(relevantArray, 'RELEVANT ARRAY')
    console.log(relevantSongFinder(songs[1], user, 1), 'song array')

    relevantSongs=[];
    let relevantSongsTotal=[];

const relevantSongsFinder = (songs, user, numberMissingChords) =>{
    relevantSongs=[];
    relevantSongsTotal=[];
    // console.log(songs, 'songs HERE')

    songs.forEach((el, index)=>{
        // console.log(el, 'el HERE')
        relevantSongFinder(el, user, numberMissingChords)
        if (relevantSongs.length) {relevantSongsTotal=[...relevantSongsTotal, ...relevantSongs]}
    })
    return relevantSongsTotal
}
console.log(relevantSongsFinder(songs, user, 4, 'songs TOTAL array'))




// const almostPlay = (user, numberFalses) => {
//     relevantSongs=[];
//     arrayTrueFalse = [];
//     songs.map(el=> {
//         // For every song's chords array:

//         //check every chord to see if the user's chords array contains it:
//     booleanArrayCreator(el["chords"], user.chordsKnow)
// })
//     // console.log(relevantSongs, 'relevant songs before')
//     console.log(arrayTrueFalse, 'rel songs')
//     let arrayOfFalse = arrayTrueFalse.filter(chord=>chord===false)
//     // console.log(arrayOfFalse,'array of false')
//     if(arrayOfFalse.length===numberFalses) relevantSongs.push(el)
// })
//     return relevantSongs;
// }

// console.log(almostPlay(user, 1))
